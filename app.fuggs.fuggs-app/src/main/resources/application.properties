########################################
# General
########################################
quarkus.banner.path=banner.txt
%prod.quarkus.management.enabled=true

# Disable default Quarkus welcome page
quarkus.http.non-application-root-path=/q

########################################
# Database / Hibernate
########################################
# DevServices will automatically start PostgreSQL in dev mode
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.mapping.format.global=ignore

########################################
########################################
# DevServices will automatically start LocalStack for S3 in dev/test mode
bucket.name=fuggs-documents
quarkus.s3.path-style-access=true
quarkus.s3.devservices.buckets=${bucket.name}

########################################
# REST Clients
########################################
# Document AI service client
quarkus.rest-client.document-ai.url=${FUGGS_DOCUMENT_ANALYSIS_SERVICE_URL:http://localhost:8100}

# ZugFerd service client
quarkus.rest-client.zugferd.url=${FUGGS_ZUGFERD_SERVICE_URL:http://localhost:8103}

########################################
# Email / Mailer
########################################
# Application email settings
app.base-url=${APP_BASE_URL:http://localhost:8080}
app.from-email=${APP_FROM_EMAIL:noreply@fuggs.app}
app.from-name=${APP_FROM_NAME:Fuggs Buchhaltung}

# Dev mode: Additionally write emails as HTML files to /target for debugging
%dev.app.email.write-to-file=true
%dev.app.email.output-dir=target/emails

# Quarkus Mailer configuration
# Dev mode: Set to false to test real email sending with Gmail
%dev.quarkus.mailer.mock=true
%dev.quarkus.mailer.from=${app.from-email}
%dev.quarkus.mailer.host=${SMTP_HOST:smtp.gmail.com}
%dev.quarkus.mailer.port=${SMTP_PORT:587}
%dev.quarkus.mailer.start-tls=REQUIRED
%dev.quarkus.mailer.username=${SMTP_USERNAME}
%dev.quarkus.mailer.password=${SMTP_PASSWORD}

# Test mode: Log emails to console
%test.quarkus.mailer.mock=true

# Production mode: Configure SMTP server
%prod.quarkus.mailer.from=${app.from-email}
%prod.quarkus.mailer.host=${SMTP_HOST:smtp.gmail.com}
%prod.quarkus.mailer.port=${SMTP_PORT:587}
%prod.quarkus.mailer.start-tls=REQUIRED
%prod.quarkus.mailer.username=${SMTP_USERNAME}
%prod.quarkus.mailer.password=${SMTP_PASSWORD}

########################################
# Temporal Workflow Engine
########################################
quarkus.temporal.connection.target=localhost:7233
quarkus.temporal.worker.task-queue=DocumentProcessingQueue
quarkus.temporal.start-workers=true

# gRPC configuration (avoid port conflicts)
quarkus.grpc.server.use-separate-server=false

########################################
# OIDC / Keycloak
########################################
quarkus.oidc.application-type=web-app

# DevServices configuration
quarkus.keycloak.devservices.realm-name=fuggs
quarkus.keycloak.devservices.users.admin=password
quarkus.keycloak.devservices.users.maria=password
quarkus.keycloak.devservices.users.thomas=password
quarkus.keycloak.devservices.roles.admin=super_admin,admin,user
quarkus.keycloak.devservices.roles.maria=admin,user
quarkus.keycloak.devservices.roles.thomas=user

# Logout configuration
quarkus.oidc.logout.path=/logout
quarkus.oidc.logout.post-logout-path=/
quarkus.http.auth.permission.logout.paths=/logout
quarkus.http.auth.permission.logout.policy=authenticated

# Keycloak Admin Client (for programmatic user management)
# Dev Services will automatically configure the admin client

########################################
# Bootstrap Configuration
########################################

# Organization A: Musikverein Harmonie
fuggs.bootstrap.org-a.name=Musikverein Harmonie e.V.
fuggs.bootstrap.org-a.slug=musikverein-harmonie
fuggs.bootstrap.org-a.display-name=Musikverein Harmonie

# Organization B: Sportverein Alpenblick
fuggs.bootstrap.org-b.name=Sportverein Alpenblick e.V.
fuggs.bootstrap.org-b.slug=sportverein-alpenblick
fuggs.bootstrap.org-b.display-name=Sportverein Alpenblick

# User 1: Super Admin (Org A)
fuggs.bootstrap.users.admin.username=admin
fuggs.bootstrap.users.admin.email=admin@musikverein.local
fuggs.bootstrap.users.admin.first-name=Super
fuggs.bootstrap.users.admin.last-name=Admin
fuggs.bootstrap.users.admin.roles=super_admin,admin,user
fuggs.bootstrap.users.admin.organization=musikverein-harmonie

# User 2: Admin (Org A)
fuggs.bootstrap.users.maria.username=maria
fuggs.bootstrap.users.maria.email=maria.schmidt@musikverein.local
fuggs.bootstrap.users.maria.first-name=Maria
fuggs.bootstrap.users.maria.last-name=Schmidt
fuggs.bootstrap.users.maria.roles=admin,user
fuggs.bootstrap.users.maria.organization=musikverein-harmonie

# User 3: Regular User (Org B)
fuggs.bootstrap.users.thomas.username=thomas
fuggs.bootstrap.users.thomas.email=thomas.mueller@alpenblick.local
fuggs.bootstrap.users.thomas.first-name=Thomas
fuggs.bootstrap.users.thomas.last-name=MÃ¼ller
fuggs.bootstrap.users.thomas.roles=user
fuggs.bootstrap.users.thomas.organization=sportverein-alpenblick
